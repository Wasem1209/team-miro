(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[741],{20063:(e,a,l)=>{"use strict";var r=l(47260);l.o(r,"usePathname")&&l.d(a,{usePathname:function(){return r.usePathname}}),l.o(r,"useRouter")&&l.d(a,{useRouter:function(){return r.useRouter}}),l.o(r,"useSearchParams")&&l.d(a,{useSearchParams:function(){return r.useSearchParams}})},28968:(e,a,l)=>{"use strict";l.r(a),l.d(a,{default:()=>u});var r=l(95155),s=l(12115),t=l(20063),n=l(15239),d=l(52619),i=l.n(d),c=l(35626);let o=Array.from({length:30},(e,a)=>2025-a);function u(){let e=(0,t.useRouter)(),[a,l]=(0,s.useState)(null),[d,u]=(0,s.useState)(null),[m,h]=(0,s.useState)({name:"",model:"",car_type:"",year:"",seating_capacity:"",fuel_type:"",air_condition:"",luggage_capacity:"",wheel_drive:"",price_per_day:"",available_start:"",available_end:"",soft_reserve_limit:"",rules:""}),[p,x]=(0,s.useState)(!1),[g,y]=(0,s.useState)(null),[b,f]=(0,s.useState)(null);function j(e){let{name:a,value:l}=e.target;h(e=>({...e,[a]:l}))}async function v(l){l.preventDefault(),y(null),f(null);let r=m.name.trim()?m.model.trim()?!m.price_per_day||Number.isNaN(Number(m.price_per_day))?"Please enter a valid price per day.":m.year?m.car_type?null:"Please enter the car type.":"Please select the year.":"Please enter the car model.":"Please enter the car name.";if(r)return void y(r);x(!0);try{let l=new FormData;Object.entries(m).forEach(e=>{let[a,r]=e;return l.append(a,r)}),a&&l.append("photo",a);let r=await fetch("https://driveeasy.pythonanywhere.com/api/v1/car/new/",{method:"POST",body:l});if(!r.ok){let e=await r.text();throw Error(e||"Failed to add car")}f("Car added successfully!"),setTimeout(()=>e.push("/app/dashboard/cars-listings"),1500)}catch(e){e instanceof Error&&y(e.message||"An error occurred while adding the car")}finally{x(!1)}}return(0,r.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,r.jsx)("main",{className:"flex-1 p-6",children:(0,r.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsxs)(i(),{href:"/app/dashboard/cars-listings",className:"inline-flex items-center gap-2 text-gray-700 hover:underline",children:[(0,r.jsx)(c.A,{size:18})," Back to Cars/Listings"]})}),(0,r.jsxs)("div",{className:"bg-white border rounded-lg p-6",children:[(0,r.jsx)("h1",{className:"text-xl md:text-2xl font-semibold mb-4",children:"Add Car"}),(0,r.jsxs)("form",{onSubmit:v,className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload Picture"}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)("label",{htmlFor:"photo",className:"flex-1 cursor-pointer bg-gray-50 border border-gray-200 rounded px-4 py-3 flex items-center justify-between",children:[(0,r.jsx)("span",{className:a?"text-gray-900":"text-gray-400",children:a?a.name:"Select a picture"}),(0,r.jsx)("span",{className:"text-gray-500",children:"\uD83D\uDCF7"})]}),(0,r.jsx)("input",{id:"photo",name:"photo",type:"file",accept:"image/*",onChange:function(e){var a,r;let s=null!=(r=null==(a=e.target.files)?void 0:a[0])?r:null;if(l(s),y(null),s){let e=new FileReader;e.onload=()=>u(String(e.result)),e.readAsDataURL(s)}else u(null)},className:"sr-only"})]}),d&&(0,r.jsx)("div",{className:"mt-3",children:(0,r.jsx)("div",{className:"w-48 h-32 relative rounded overflow-hidden border",children:(0,r.jsx)(n.default,{src:d,alt:"preview",width:192,height:128,className:"w-full h-full object-cover"})})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Model"}),(0,r.jsx)("input",{name:"model",value:m.model,onChange:j,placeholder:"e.g. Camry",className:"w-full rounded px-4 py-3 bg-gray-50 border border-gray-200 focus:outline-none"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Year"}),(0,r.jsxs)("select",{"aria-label":"year",name:"year",value:m.year,onChange:j,className:"w-full rounded px-4 py-3 bg-white border border-gray-200 focus:outline-none",children:[(0,r.jsx)("option",{value:"",children:"Select year"}),o.map(e=>(0,r.jsx)("option",{value:e,children:e},e))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fuel Type"}),(0,r.jsx)("input",{name:"fuel_type",value:m.fuel_type,onChange:j,placeholder:"e.g. Petrol",className:"w-full rounded px-4 py-3 bg-gray-50 border border-gray-200 focus:outline-none"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Price per day"}),(0,r.jsx)("input",{name:"price_per_day",value:m.price_per_day,onChange:j,placeholder:"e.g. 100",className:"w-full rounded px-4 py-3 bg-gray-50 border border-gray-200 focus:outline-none"})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Car Name"}),(0,r.jsx)("input",{name:"name",value:m.name,onChange:j,placeholder:"e.g. Toyota Corolla",className:"w-full rounded px-4 py-3 bg-gray-50 border border-gray-200 focus:outline-none"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Car Type"}),(0,r.jsx)("input",{name:"car_type",value:m.car_type,onChange:j,placeholder:"e.g. Sedan",className:"w-full rounded px-4 py-3 bg-gray-50 border border-gray-200 focus:outline-none"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Seating Capacity"}),(0,r.jsx)("input",{name:"seating_capacity",value:m.seating_capacity,onChange:j,placeholder:"e.g. 4",className:"w-full rounded px-4 py-3 bg-gray-50 border border-gray-200 focus:outline-none"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Luggage Capacity"}),(0,r.jsx)("input",{name:"luggage_capacity",value:m.luggage_capacity,onChange:j,placeholder:"e.g. 100 liters",className:"w-full rounded px-4 py-3 bg-gray-50 border border-gray-200 focus:outline-none"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Wheel Drive"}),(0,r.jsx)("input",{name:"wheel_drive",value:m.wheel_drive,onChange:j,placeholder:"e.g. AWD",className:"w-full rounded px-4 py-3 bg-gray-50 border border-gray-200 focus:outline-none"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Add Rules"}),(0,r.jsx)("textarea",{name:"rules",value:m.rules,onChange:j,rows:6,placeholder:"Add specific car usage rules here",className:"w-full rounded px-4 py-3 bg-gray-50 border border-gray-200 focus:outline-none"})]}),g&&(0,r.jsx)("p",{className:"text-sm text-red-600",children:g}),b&&(0,r.jsx)("p",{className:"text-sm text-green-600",children:b}),(0,r.jsx)("div",{children:(0,r.jsx)("button",{type:"submit",disabled:p,className:"w-full bg-black text-white py-4 rounded-full text-lg font-semibold hover:bg-gray-900 disabled:opacity-60",children:p?"Adding...":"Add Car"})})]})]})]})})})}},35626:(e,a,l)=>{"use strict";l.d(a,{A:()=>r});let r=(0,l(71847).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},59316:(e,a,l)=>{Promise.resolve().then(l.bind(l,28968))}},e=>{e.O(0,[473,619,441,255,358],()=>e(e.s=59316)),_N_E=e.O()}]);