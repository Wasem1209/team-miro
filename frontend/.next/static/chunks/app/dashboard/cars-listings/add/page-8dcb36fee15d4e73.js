(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[741],{20063:(e,a,l)=>{"use strict";var r=l(47260);l.o(r,"usePathname")&&l.d(a,{usePathname:function(){return r.usePathname}}),l.o(r,"useRouter")&&l.d(a,{useRouter:function(){return r.useRouter}}),l.o(r,"useSearchParams")&&l.d(a,{useSearchParams:function(){return r.useSearchParams}})},28968:(e,a,l)=>{"use strict";l.r(a),l.d(a,{default:()=>m});var r=l(95155),s=l(12115),t=l(20063),n=l(15239),d=l(52619),i=l.n(d),c=l(35626),o=l(95704);let u=Array.from({length:30},(e,a)=>2025-a);function m(){let e=(0,t.useRouter)(),a=o.env.NEXT_PUBLIC_API_URL||"",[l,d]=(0,s.useState)(null),[m,h]=(0,s.useState)(null),[x,p]=(0,s.useState)({name:"",model:"",car_type:"",year:"",seating_capacity:"",fuel_type:"",air_condition:"",luggage_capacity:"",wheel_drive:"",price_per_day:"",available_start:"",available_end:"",soft_reserve_limit:"",rules:""}),[g,y]=(0,s.useState)(!1),[b,f]=(0,s.useState)(null),[j,v]=(0,s.useState)(null);function N(e){let{name:a,value:l}=e.target;p(e=>({...e,[a]:l}))}async function _(r){r.preventDefault(),f(null),v(null);let s=x.name.trim()?x.model.trim()?!x.price_per_day||Number.isNaN(Number(x.price_per_day))?"Please enter a valid price per day.":x.year?x.car_type?null:"Please enter the car type.":"Please select the year.":"Please enter the car model.":"Please enter the car name.";if(s)return void f(s);y(!0);try{let r=new FormData;Object.entries(x).forEach(e=>{let[a,l]=e;return r.append(a,l)}),l&&r.append("photo",l);let s=await fetch("".concat(a,"/api/v1/car/new/"),{method:"POST",body:r});if(!s.ok){let e=await s.text();throw Error(e||"Failed to add car")}v("Car added successfully!"),setTimeout(()=>e.push("/app/dashboard/cars-listings"),1500)}catch(e){e instanceof Error&&f(e.message||"An error occurred while adding the car")}finally{y(!1)}}return(0,r.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,r.jsx)("main",{className:"flex-1 p-6",children:(0,r.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsxs)(i(),{href:"/app/dashboard/cars-listings",className:"inline-flex items-center gap-2 text-gray-700 hover:underline",children:[(0,r.jsx)(c.A,{size:18})," Back to Cars/Listings"]})}),(0,r.jsxs)("div",{className:"bg-white border rounded-lg p-6",children:[(0,r.jsx)("h1",{className:"text-xl md:text-2xl font-semibold mb-4",children:"Add Car"}),(0,r.jsxs)("form",{onSubmit:_,className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload Picture"}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)("label",{htmlFor:"photo",className:"flex-1 cursor-pointer bg-gray-50 border border-gray-200 rounded px-4 py-3 flex items-center justify-between",children:[(0,r.jsx)("span",{className:l?"text-gray-900":"text-gray-400",children:l?l.name:"Select a picture"}),(0,r.jsx)("span",{className:"text-gray-500",children:"\uD83D\uDCF7"})]}),(0,r.jsx)("input",{id:"photo",name:"photo",type:"file",accept:"image/*",onChange:function(e){var a,l;let r=null!=(l=null==(a=e.target.files)?void 0:a[0])?l:null;if(d(r),f(null),r){let e=new FileReader;e.onload=()=>h(String(e.result)),e.readAsDataURL(r)}else h(null)},className:"sr-only"})]}),m&&(0,r.jsx)("div",{className:"mt-3",children:(0,r.jsx)("div",{className:"w-48 h-32 relative rounded overflow-hidden border",children:(0,r.jsx)(n.default,{src:m,alt:"preview",width:192,height:128,className:"w-full h-full object-cover"})})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Model"}),(0,r.jsx)("input",{name:"model",value:x.model,onChange:N,placeholder:"e.g. Camry",className:"w-full rounded px-4 py-3 bg-gray-50 border border-gray-200 focus:outline-none"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Year"}),(0,r.jsxs)("select",{"aria-label":"year",name:"year",value:x.year,onChange:N,className:"w-full rounded px-4 py-3 bg-white border border-gray-200 focus:outline-none",children:[(0,r.jsx)("option",{value:"",children:"Select year"}),u.map(e=>(0,r.jsx)("option",{value:e,children:e},e))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fuel Type"}),(0,r.jsx)("input",{name:"fuel_type",value:x.fuel_type,onChange:N,placeholder:"e.g. Petrol",className:"w-full rounded px-4 py-3 bg-gray-50 border border-gray-200 focus:outline-none"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Price per day"}),(0,r.jsx)("input",{name:"price_per_day",value:x.price_per_day,onChange:N,placeholder:"e.g. 100",className:"w-full rounded px-4 py-3 bg-gray-50 border border-gray-200 focus:outline-none"})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Car Name"}),(0,r.jsx)("input",{name:"name",value:x.name,onChange:N,placeholder:"e.g. Toyota Corolla",className:"w-full rounded px-4 py-3 bg-gray-50 border border-gray-200 focus:outline-none"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Car Type"}),(0,r.jsx)("input",{name:"car_type",value:x.car_type,onChange:N,placeholder:"e.g. Sedan",className:"w-full rounded px-4 py-3 bg-gray-50 border border-gray-200 focus:outline-none"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Seating Capacity"}),(0,r.jsx)("input",{name:"seating_capacity",value:x.seating_capacity,onChange:N,placeholder:"e.g. 4",className:"w-full rounded px-4 py-3 bg-gray-50 border border-gray-200 focus:outline-none"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Luggage Capacity"}),(0,r.jsx)("input",{name:"luggage_capacity",value:x.luggage_capacity,onChange:N,placeholder:"e.g. 100 liters",className:"w-full rounded px-4 py-3 bg-gray-50 border border-gray-200 focus:outline-none"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Wheel Drive"}),(0,r.jsx)("input",{name:"wheel_drive",value:x.wheel_drive,onChange:N,placeholder:"e.g. AWD",className:"w-full rounded px-4 py-3 bg-gray-50 border border-gray-200 focus:outline-none"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Add Rules"}),(0,r.jsx)("textarea",{name:"rules",value:x.rules,onChange:N,rows:6,placeholder:"Add specific car usage rules here",className:"w-full rounded px-4 py-3 bg-gray-50 border border-gray-200 focus:outline-none"})]}),b&&(0,r.jsx)("p",{className:"text-sm text-red-600",children:b}),j&&(0,r.jsx)("p",{className:"text-sm text-green-600",children:j}),(0,r.jsx)("div",{children:(0,r.jsx)("button",{type:"submit",disabled:g,className:"w-full bg-black text-white py-4 rounded-full text-lg font-semibold hover:bg-gray-900 disabled:opacity-60",children:g?"Adding...":"Add Car"})})]})]})]})})})}},35626:(e,a,l)=>{"use strict";l.d(a,{A:()=>r});let r=(0,l(71847).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},59316:(e,a,l)=>{Promise.resolve().then(l.bind(l,28968))}},e=>{e.O(0,[473,619,441,255,358],()=>e(e.s=59316)),_N_E=e.O()}]);