(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[527],{35626:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(71847).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},60318:(e,r,t)=>{Promise.resolve().then(t.bind(t,72436))},71847:(e,r,t)=>{"use strict";t.d(r,{A:()=>u});var a=t(12115);let n=e=>{let r=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,r,t)=>t?t.toUpperCase():r.toLowerCase());return r.charAt(0).toUpperCase()+r.slice(1)},l=function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return r.filter((e,r,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===r).join(" ").trim()};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let s=(0,a.forwardRef)((e,r)=>{let{color:t="currentColor",size:n=24,strokeWidth:s=2,absoluteStrokeWidth:u,className:c="",children:o,iconNode:d,...m}=e;return(0,a.createElement)("svg",{ref:r,...i,width:n,height:n,stroke:t,strokeWidth:u?24*Number(s)/Number(n):s,className:l("lucide",c),...!o&&!(e=>{for(let r in e)if(r.startsWith("aria-")||"role"===r||"title"===r)return!0})(m)&&{"aria-hidden":"true"},...m},[...d.map(e=>{let[r,t]=e;return(0,a.createElement)(r,t)}),...Array.isArray(o)?o:[o]])}),u=(e,r)=>{let t=(0,a.forwardRef)((t,i)=>{let{className:u,...c}=t;return(0,a.createElement)(s,{ref:i,iconNode:r,className:l("lucide-".concat(n(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),u),...c})});return t.displayName=n(e),t}},72436:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>c});var a=t(95155),n=t(12115),l=t(52619),i=t.n(l),s=t(35626),u=t(95704);function c(){let[e,r]=(0,n.useState)([]),[t,l]=(0,n.useState)({email:"",fullName:"",phone:"",address:"",country:"",state:"",city:"",driversLicense:"",pickupDate:"",pickupTime:"",returnDate:"",returnTime:"",pickupLocation:"",returnLocation:"",selectedCarId:""}),[c,d]=(0,n.useState)(null),[m,p]=(0,n.useState)(null),[h,f]=(0,n.useState)(!1);function b(e){let{name:r,value:t}=e.target;l(e=>({...e,[r]:t}))}async function v(e){e.preventDefault(),d(null),p(null);let r=t.email.trim()?t.fullName.trim()?t.phone.trim()?t.selectedCarId?t.pickupDate?t.returnDate?null:"Return date is required.":"Pick-up date is required.":"Please select a car from your listings.":"Customer's phone number is required.":"Customer's full name is required.":"Customer email is required.";if(r)return void d(r);f(!0);try{let e={customer_email:t.email,customer_name:t.fullName,phone:t.phone,address:t.address,country:t.country,state:t.state,city:t.city,drivers_license:t.driversLicense,pickup_date:t.pickupDate,pickup_time:t.pickupTime,return_date:t.returnDate,return_time:t.returnTime,pickup_location:t.pickupLocation,return_location:t.returnLocation,car_id:Number(t.selectedCarId)},r=await fetch("".concat(u.env.NEXT_PUBLIC_API_URL,"/api/v1/reservation/new/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!r.ok){let e=await r.json();throw Error(e.detail||"Failed to create reservation")}p("Reservation successfully created"),l({email:"",fullName:"",phone:"",address:"",country:"",state:"",city:"",driversLicense:"",pickupDate:"",pickupTime:"",returnDate:"",returnTime:"",pickupLocation:"",returnLocation:"",selectedCarId:""})}catch(e){e instanceof Error?d(e.message):d("An unexpected error occurred.")}finally{f(!1)}}return(0,n.useEffect)(()=>{(async()=>{try{let e=await fetch("".concat(u.env.NEXT_PUBLIC_API_URL,"/api/v1/cars/"));if(!e.ok)throw Error("Failed to load car listings");let t=await e.json();r(t)}catch(e){console.error("Failed to fetch cars:",e),r([{id:1,name:"Lamborghini Hurac\xe1n 2022",available:!0,price_per_day:1200},{id:2,name:"BMW M3",available:!0,price_per_day:399},{id:3,name:"Porsche 911 Turbo",available:!1,price_per_day:1e3},{id:4,name:"Tesla Model S",available:!0,price_per_day:250}])}})()},[]),(0,a.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,a.jsx)("div",{className:"flex",children:(0,a.jsx)("main",{className:"flex-1 p-6",children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsxs)(i(),{href:"/dashboard/reservations",className:"inline-flex items-center gap-2 text-gray-700 hover:underline",children:[(0,a.jsx)(s.A,{size:18})," Back to Reservations"]})}),(0,a.jsxs)("div",{className:"bg-white border rounded-lg p-6 shadow-sm",children:[(0,a.jsx)("h1",{className:"text-xl md:text-2xl font-semibold mb-4",children:"Create Reservation"}),(0,a.jsxs)("form",{onSubmit:v,className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(o,{label:"Customer's Email Address",name:"email",type:"email",value:t.email,onChange:b,required:!0}),(0,a.jsx)(o,{label:"Customer's Phone Number",name:"phone",value:t.phone,onChange:b,required:!0}),(0,a.jsx)(o,{label:"Customer's Country",name:"country",value:t.country,onChange:b}),(0,a.jsx)(o,{label:"Customer's City",name:"city",value:t.city,onChange:b}),(0,a.jsx)(o,{label:"Pick-up Date",name:"pickupDate",type:"date",value:t.pickupDate,onChange:b,required:!0}),(0,a.jsx)(o,{label:"Preferred Pick-up Time",name:"pickupTime",value:t.pickupTime,onChange:b}),(0,a.jsx)(o,{label:"Pick-up Location",name:"pickupLocation",value:t.pickupLocation,onChange:b})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(o,{label:"Customer's Full Name",name:"fullName",value:t.fullName,onChange:b,required:!0}),(0,a.jsx)(o,{label:"Customer's Address",name:"address",value:t.address,onChange:b}),(0,a.jsx)(o,{label:"Customer's State",name:"state",value:t.state,onChange:b}),(0,a.jsx)(o,{label:"Driver's License Number",name:"driversLicense",value:t.driversLicense,onChange:b}),(0,a.jsx)(o,{label:"Return Date",name:"returnDate",type:"date",value:t.returnDate,onChange:b,required:!0}),(0,a.jsx)(o,{label:"Preferred Return Time",name:"returnTime",value:t.returnTime,onChange:b}),(0,a.jsx)(o,{label:"Return Location",name:"returnLocation",value:t.returnLocation,onChange:b})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Car"}),(0,a.jsxs)("select",{"aria-label":"Select car",name:"selectedCarId",value:t.selectedCarId,onChange:b,className:"w-full rounded px-4 py-3 bg-white border border-gray-200 focus:outline-none",required:!0,children:[(0,a.jsx)("option",{value:"",children:"Pick a car from your listings"}),e.map(e=>(0,a.jsxs)("option",{value:String(e.id),children:[e.name," ",e.available?"(Available)":"(Unavailable)"]},e.id))]})]}),c&&(0,a.jsx)("p",{className:"text-sm text-red-600",children:c}),m&&(0,a.jsx)("p",{className:"text-sm text-green-600",children:m}),(0,a.jsx)("div",{children:(0,a.jsx)("button",{type:"submit",disabled:h,className:"w-full bg-black text-white py-4 rounded-full text-lg font-semibold hover:bg-gray-900 disabled:opacity-60 transition",children:h?"Reserving...":"Reserve"})})]})]})]})})})})}function o(e){let{label:r,name:t,value:n,onChange:l,type:i="text",required:s=!1}=e;return(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:r}),(0,a.jsx)("input",{"aria-label":"name",name:t,value:n,onChange:l,type:i,required:s,className:"w-full rounded px-4 py-3 bg-white border border-gray-200 focus:outline-none"})]})}},83011:(e,r,t)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"useMergedRef",{enumerable:!0,get:function(){return n}});let a=t(12115);function n(e,r){let t=(0,a.useRef)(null),n=(0,a.useRef)(null);return(0,a.useCallback)(a=>{if(null===a){let e=t.current;e&&(t.current=null,e());let r=n.current;r&&(n.current=null,r())}else e&&(t.current=l(e,a)),r&&(n.current=l(r,a))},[e,r])}function l(e,r){if("function"!=typeof e)return e.current=r,()=>{e.current=null};{let t=e(r);return"function"==typeof t?t:()=>e(null)}}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),e.exports=r.default)}},e=>{e.O(0,[619,441,255,358],()=>e(e.s=60318)),_N_E=e.O()}]);