(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[585],{6191:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(71847).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},20063:(e,t,s)=>{"use strict";var a=s(47260);s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},45202:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>x});var a=s(95155),r=s(12115),l=s(15239),n=s(86651),i=s(6191),c=s(65229),d=s(20063),o=s(95704);let x=()=>{let[e,t]=(0,r.useState)([]),[s,x]=(0,r.useState)(null),[h,u]=(0,r.useState)(null),[m,f]=(0,r.useState)(!0),[p,g]=(0,r.useState)(null),[j,y]=(0,r.useState)(!1),[b,v]=(0,r.useState)(null),N=(0,d.useRouter)();(0,r.useEffect)(()=>{(async()=>{try{f(!0);let e=await fetch("".concat(o.env.NEXT_PUBLIC_API_URL,"/api/v1/reservation/"));if(!e.ok)throw Error("Failed to fetch reservations");let s=await e.json();t(s)}catch(e){e instanceof Error?g(e.message):g("An unknown error occurred")}finally{f(!1)}})()},[]);let w=async e=>{try{if(!(await fetch("".concat(o.env.NEXT_PUBLIC_API_URL,"/api/v1/reservation/").concat(e,"/update/"),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"Confirmed"})})).ok)throw Error("Failed to confirm reservation");t(t=>t.map(t=>t.id===e?{...t,status:"Confirmed"}:t))}catch(e){console.error("Failed to confirm reservation:",e)}},k=async e=>{try{if(!(await fetch("".concat(o.env.NEXT_PUBLIC_API_URL,"/api/v1/reservation/").concat(e,"/cancel/"),{method:"POST",headers:{"Content-Type":"application/json"}})).ok)throw Error("Failed to cancel reservation");t(t=>t.map(t=>t.id===e?{...t,status:"Cancelled"}:t))}catch(e){console.error("Failed to cancel reservation:",e)}},C=async e=>{u(e),v(null),y(!0),x(null);try{let t=await fetch("".concat(o.env.NEXT_PUBLIC_API_URL,"/api/v1/reservation/").concat(e,"/"));if(!t.ok)throw Error("Failed to fetch reservation details");let s=await t.json();x(s.car_details||s)}catch(e){e instanceof Error?v(e.message):v("Unable to load car details.")}finally{y(!1)}},P=()=>{x(null),u(null),v(null)};return m?(0,a.jsx)("div",{className:"flex justify-center items-center min-h-screen text-gray-600",children:"Loading reservations..."}):p?(0,a.jsx)("div",{className:"flex justify-center items-center min-h-screen text-red-600",children:p}):(0,a.jsxs)("div",{className:"flex flex-col min-h-screen bg-gray-100 p-4 sm:p-6 md:p-10",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"relative w-full sm:w-1/2",children:[(0,a.jsx)(n.A,{className:"absolute left-3 top-3 text-gray-400",size:18}),(0,a.jsx)("input",{type:"text",placeholder:"Search reservations...",className:"w-full border border-gray-300 rounded-lg pl-10 pr-4 py-2 text-sm sm:text-base focus:outline-none focus:ring-2 focus:ring-black"})]}),(0,a.jsxs)("button",{onClick:()=>N.push("/dashboard/reservations/create+"),className:"flex items-center justify-center gap-2 bg-black text-white px-4 sm:px-6 py-2 rounded-lg hover:bg-gray-800 transition text-sm sm:text-base",children:[(0,a.jsx)(i.A,{size:18})," Create Reservation"]})]}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-md overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full border-collapse",children:[(0,a.jsx)("thead",{className:"bg-gray-100",children:(0,a.jsxs)("tr",{className:"text-left text-sm text-gray-600",children:[(0,a.jsx)("th",{className:"p-4",children:"Usernames"}),(0,a.jsx)("th",{className:"p-4",children:"Car Name"}),(0,a.jsx)("th",{className:"p-4",children:"Date"}),(0,a.jsx)("th",{className:"p-4",children:"Payment"}),(0,a.jsx)("th",{className:"p-4",children:"Status"}),(0,a.jsx)("th",{className:"p-4 text-right",children:"Actions"})]})}),(0,a.jsx)("tbody",{children:e.map(e=>(0,a.jsxs)("tr",{className:"border-t text-sm text-gray-700 hover:bg-gray-50",children:[(0,a.jsxs)("td",{className:"p-4 flex items-center gap-3",children:[(0,a.jsx)(l.default,{src:e.avatar||"/user.png",alt:e.username,width:32,height:32,className:"rounded-full"}),e.username]}),(0,a.jsx)("td",{className:"p-4",children:e.car}),(0,a.jsx)("td",{className:"p-4",children:e.date}),(0,a.jsx)("td",{className:"p-4",children:e.payment}),(0,a.jsx)("td",{className:"p-4",children:(0,a.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium ".concat((e=>{switch(e){case"Pending":return"bg-orange-500 text-white";case"Cancelled":return"bg-red-600 text-white";case"Modified":return"bg-yellow-500 text-white";case"Confirmed":return"bg-green-500 text-white";case"Completed":return"bg-emerald-600 text-white";default:return"bg-gray-400 text-white"}})(e.status)),children:e.status})}),(0,a.jsxs)("td",{className:"p-4 text-right flex flex-wrap justify-end gap-2",children:[(0,a.jsx)("button",{onClick:()=>C(e.id),className:"border border-gray-400 px-4 py-1 rounded-full text-sm hover:bg-gray-100",children:"View Details"}),"Cancelled"!==e.status&&(0,a.jsx)("button",{onClick:()=>k(e.id),className:"border border-red-500 text-red-600 px-4 py-1 rounded-full text-sm hover:bg-red-50",children:"Cancel"}),(0,a.jsx)("button",{onClick:()=>w(e.id),disabled:"Pending"!==e.status&&"Modified"!==e.status,className:"px-4 py-1 rounded-full text-sm transition ".concat("Pending"===e.status||"Modified"===e.status?"bg-black text-white hover:bg-gray-800":"bg-gray-300 text-gray-600 cursor-not-allowed"),children:"Confirm"})]})]},e.id))})]})}),(j||s||b)&&(0,a.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 px-4 z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg w-full max-w-4xl flex flex-col sm:flex-row overflow-hidden relative",children:[(0,a.jsx)("button",{onClick:P,className:"absolute top-3 right-3 text-gray-500 hover:text-black",children:(0,a.jsx)(c.A,{size:22})}),j&&(0,a.jsx)("div",{className:"flex items-center justify-center w-full h-96 text-gray-600",children:"Loading car details..."}),b&&!j&&(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center w-full h-96 text-red-600",children:[(0,a.jsx)("p",{children:b}),(0,a.jsx)("button",{onClick:()=>h&&C(h),className:"mt-4 bg-black text-white px-4 py-2 rounded-full hover:bg-gray-800 transition",children:"Retry"})]}),s&&!j&&!b&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"flex-1 flex items-center justify-center bg-gray-50 p-4",children:(0,a.jsx)(l.default,{src:s.image||"/car-placeholder.png",alt:s.model,width:500,height:400,className:"object-contain"})}),(0,a.jsxs)("div",{className:"flex-1 p-6 flex flex-col justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:[s.make," ",s.model]}),(0,a.jsxs)("ul",{className:"space-y-1 text-gray-700 text-sm sm:text-base",children:[(0,a.jsxs)("li",{children:[(0,a.jsx)("b",{children:"Type:"})," ",s.type]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("b",{children:"Year:"})," ",s.year]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("b",{children:"Air Conditioning:"})," ",s.ac]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("b",{children:"Seats:"})," ",s.seats]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("b",{children:"Luggage Capacity:"})," ",s.luggage]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("b",{children:"Fuel Type:"})," ",s.fuel]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("b",{children:"Drive:"})," ",s.drive]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("b",{children:"Rules:"})," ",s.rules]})]}),(0,a.jsxs)("p",{className:"mt-4 font-semibold text-gray-800",children:["Price: ",s.price]})]}),(0,a.jsx)("div",{className:"flex justify-end gap-3 mt-6",children:(0,a.jsx)("button",{onClick:P,className:"border border-gray-400 text-gray-700 px-5 py-2 rounded-full hover:bg-gray-100 transition",children:"Close"})})]})]})]})})]})}},64603:(e,t,s)=>{Promise.resolve().then(s.bind(s,45202))},65229:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(71847).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},86651:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(71847).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])}},e=>{e.O(0,[473,441,255,358],()=>e(e.s=64603)),_N_E=e.O()}]);