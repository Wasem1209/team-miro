(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{41542:(e,s,t)=>{Promise.resolve().then(t.bind(t,60116))},60116:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>h});var a=t(95155),l=t(52619),r=t.n(l),i=t(15239),n=t(12115),c=t(86651),d=t(23258),m=t(31607),o=t(27830);function h(){let[e,s]=(0,n.useState)([]),[t,l]=(0,n.useState)([]),[m,h]=(0,n.useState)(0),[x,u]=(0,n.useState)(0),[g,j]=(0,n.useState)(0);(0,n.useEffect)(()=>{(async()=>{try{let[e,t,a,r]=await Promise.all([fetch("/api/activities"),fetch("/api/revenue"),fetch("/api/cars"),fetch("/api/reservations")]),[i,n,c,d]=await Promise.all([e.json(),t.json(),a.json(),r.json()]);s(i),l(n),h(c.length||0),u(d.length||0);let m=n.reduce((e,s)=>e+(s.amount||0),0);j(m)}catch(e){console.error("❌ Error fetching dashboard data:",e)}})()},[]);let p={labels:t.map(e=>e.month),datasets:[{label:"Revenue",data:t.map(e=>e.amount),borderColor:"#000000",backgroundColor:"rgba(0,0,0,0.1)",tension:.3}]};return(0,a.jsx)("div",{className:"flex min-h-screen bg-gray-100",children:(0,a.jsxs)("main",{className:"flex-1 p-6 md:ml-0",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,a.jsx)("h1",{className:"text-xl md:text-2xl font-semibold",children:"Welcome Back, See how your fleets are performing"})}),(0,a.jsxs)("div",{className:"relative mb-6",children:[(0,a.jsx)(c.A,{className:"absolute left-3 top-3 text-gray-400",size:18}),(0,a.jsx)("input",{type:"text",placeholder:"Search feature...",className:"w-full pl-10 pr-3 py-2 border rounded-lg focus:outline-none focus:ring-1 focus:ring-black"})]}),(0,a.jsx)("h2",{className:"font-semibold mb-2",children:"Dashboard"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"bg-white p-5 rounded-lg shadow-sm",children:[(0,a.jsx)("h3",{className:"text-gray-500 text-sm mb-1",children:"Cars Listed"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:m}),(0,a.jsx)(r(),{href:"/dashboard/cars-listings",className:"text-sm text-black underline",children:"See Cars/Listings \xbb"})]}),(0,a.jsxs)("div",{className:"bg-white p-5 rounded-lg shadow-sm",children:[(0,a.jsx)("h3",{className:"text-gray-500 text-sm mb-1",children:"Cars Currently Reserved"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:x}),(0,a.jsx)(r(),{href:"/reports",className:"text-sm text-black underline",children:"See Reports \xbb"})]}),(0,a.jsxs)("div",{className:"bg-white p-5 rounded-lg shadow-sm",children:[(0,a.jsx)("h3",{className:"text-gray-500 text-sm mb-1",children:"Total Revenue Earned"}),(0,a.jsxs)("p",{className:"text-2xl font-bold",children:["$",g.toLocaleString()]}),(0,a.jsx)(r(),{href:"/reports",className:"text-sm text-black underline",children:"See Reports \xbb"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white p-5 rounded-lg shadow-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h3",{className:"font-semibold text-lg",children:"Recent Activity"}),(0,a.jsx)(r(),{href:"/activities",className:"text-sm text-black underline",children:"View Details"})]}),e.length>0?(0,a.jsx)("div",{className:"divide-y",children:e.map(e=>(0,a.jsxs)("div",{className:"flex justify-between items-center py-3 hover:bg-gray-50 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(i.default,{src:"https://i.pravatar.cc/150?u=".concat(e.id),alt:e.user_name,width:36,height:36,className:"w-9 h-9 rounded-full object-cover"}),(0,a.jsxs)("p",{className:"text-sm leading-snug",children:[(0,a.jsx)("span",{className:"font-semibold",children:e.user_name})," ",e.action]})]}),(0,a.jsx)("span",{className:"text-xs text-gray-500 whitespace-nowrap ml-3",children:(0,o.m)(new Date(e.timestamp),{addSuffix:!0})})]},e.id))}):(0,a.jsx)("p",{className:"text-gray-500 text-sm",children:"No recent activities found."})]}),(0,a.jsxs)("div",{className:"bg-white p-5 rounded-lg shadow-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,a.jsx)("h3",{className:"font-semibold",children:"Revenue Trend"}),(0,a.jsx)(r(),{href:"/reports",className:"text-sm text-black underline",children:"View Details"})]}),(0,a.jsx)("div",{className:"h-64",children:t.length>0?(0,a.jsx)(d.N1,{data:p,options:{responsive:!0,plugins:{legend:{display:!1}}}}):(0,a.jsx)("p",{className:"text-gray-500 text-sm",children:"Loading revenue trend..."})})]})]})]})})}m.t1.register(m.No,m.PP,m.kc,m.FN,m.m_,m.s$)}},e=>{e.O(0,[647,473,619,520,441,255,358],()=>e(e.s=41542)),_N_E=e.O()}]);