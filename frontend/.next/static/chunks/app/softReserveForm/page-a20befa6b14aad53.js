(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[167],{17404:(e,t,s)=>{Promise.resolve().then(s.bind(s,26778))},20063:(e,t,s)=>{"use strict";var r=s(47260);s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(t,{useSearchParams:function(){return r.useSearchParams}})},26778:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var r=s(95155),a=s(12115),l=s(20063),n=s(35299);let i=(0,s(71847).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var c=s(15239);let o=()=>{var e;let t=(0,l.useSearchParams)(),s=(0,l.useRouter)(),o=t.get("id"),[d,x]=(0,a.useState)(null),[h,u]=(0,a.useState)(!0),[]=(0,a.useState)(!1),[m]=(0,a.useState)(!1),[p,g]=(0,a.useState)(null),[f,j]=(0,a.useState)({car:o||"",customer_name:"",customer_email:"",customer_phone:"",pickup_date:"",return_date:"",pickup_location:"",additional_notes:""});(0,a.useEffect)(()=>{o?v(o):(g("No car ID provided"),u(!1))},[o]);let v=async e=>{try{u(!0);let t=await fetch("/api/available-cars/".concat(e));if(!t.ok)throw Error("Failed to fetch car details");let s=await t.json();x(s),j(t=>({...t,car:e})),g(null)}catch(e){g(e instanceof Error?e.message:"An error occurred"),console.error("Error fetching car details:",e)}finally{u(!1)}},y=()=>{if(f.pickup_date&&f.return_date){let e=new Date(f.pickup_date);return Math.ceil(Math.abs(new Date(f.return_date).getTime()-e.getTime())/864e5)||1}return 0},N=()=>{let e=y();return e>0&&d?e*d.price_per_day:0};if(h)return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center p-6",children:(0,r.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,r.jsx)(n.A,{className:"w-12 h-12 animate-spin text-gray-600"}),(0,r.jsx)("p",{className:"text-gray-600 text-lg",children:"Loading car details..."})]})});if(!d&&p)return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center p-6",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(i,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-red-600 text-lg mb-4",children:p}),(0,r.jsx)("button",{onClick:()=>s.push("/"),className:"bg-black text-white px-6 py-2 rounded hover:bg-gray-800 transition-colors",children:"Back to Home"})]})});if(m)return(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-6 z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-8 text-center relative",children:[(0,r.jsx)("button",{onClick:()=>s.push("/"),className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",children:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsx)("svg",{className:"w-16 h-16 mx-auto text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Successful!"}),(0,r.jsxs)("p",{className:"text-gray-600 mb-6",children:["This is a soft reservation",(0,r.jsx)("br",{}),"You have an hour to sign up to make a firm reservation â€” firm reservations override soft reservations."]}),(0,r.jsx)("button",{onClick:()=>{let e={...f,carDetails:d,totalDays:y(),totalPrice:N(),timestamp:new Date().toISOString()};sessionStorage.setItem("pendingReservation",JSON.stringify(e)),s.push("/auth/Signup?from=reservation")},className:"w-full bg-black text-white py-3 px-6 rounded-lg font-medium hover:bg-gray-800 transition-colors mb-3",children:"Sign up now"}),(0,r.jsx)("button",{onClick:()=>s.push("/"),className:"text-gray-600 hover:text-gray-800 text-sm",children:"Continue browsing"})]})});let b=y(),k=N();return(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 py-12 px-4",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Complete Your Reservation"}),d&&(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("div",{className:"flex-shrink-0 w-24 h-24 bg-gray-200 rounded overflow-hidden",children:(null==(e=d.photo)?void 0:e.trim())?(0,r.jsx)(c.default,{src:d.photo,width:96,height:96,alt:"".concat(d.name," ").concat(d.model),className:"w-full h-full object-cover"}):(0,r.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("h3",{className:"text-xl font-bold text-gray-900",children:[d.name," ",d.model]}),(0,r.jsxs)("p",{className:"text-gray-600",children:["$",d.price_per_day," per day"]})]}),b>0&&(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:[b," day",b>1?"s":""]}),(0,r.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["$",k]}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"Total"})]})]})}),(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6",children:p&&(0,r.jsxs)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg flex items-start gap-3",children:[(0,r.jsx)(i,{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}),(0,r.jsx)("p",{className:"text-red-700 text-sm",children:p})]})})]})})};function d(){return(0,r.jsx)(a.Suspense,{fallback:(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsx)("p",{className:"text-gray-600 text-lg",children:"Loading..."})}),children:(0,r.jsx)(o,{})})}},35299:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(71847).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])}},e=>{e.O(0,[473,441,255,358],()=>e(e.s=17404)),_N_E=e.O()}]);